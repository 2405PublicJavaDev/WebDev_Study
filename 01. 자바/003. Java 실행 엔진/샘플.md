# 자바 실행 엔진

## 의미 

- JVM은 자바 컴파일러가 컴파일한 ByteCode를 클래스 로더를 이용해 메모리(런타임 데이터 영역)에 실행 가능한 상태로 적재함
- **실행 엔진은 메모리에 할당된 ByteCode를 실행하는 역할을 담당**
- CPU는 ByteCode를 이해하지 못하기 때문에 기계어로 번역하는 과정이 필요
    - 대표적인 2가지 방법 : 
        - Interpreter
        - JIT (Just In Time)

<br/>

## 구성

### 1. 인터프리터 (Interpreter)

- ByteCode를 읽어서 기계 코드로 변환하고 순차적으로 실행
- 명령어를 하나씩 실행하는 방법
- ByteCode를 기계가 이해할 수 있도록 Native Code로 바꾸는 작업을 함
- ByteCode가 한 줄마다 컴파일하여 Native로 변환하는 작업을 하게 되는데 중복되는 ByteCode들에 대해서도 매번 컴파일을 하면 비효율적이며 러닝 타임도 길어짐
- 이러한 중복되는 ByteCode에 대해서는 JIT 컴파일러를 사용

<br/>

### 2. JIT (Just In Time ) Compiler

- Interpreter 효율을 높히기 위해 Interpreter가 반복되는 코드를 발견하면 JIT 컴파일러로 반복되는 코드를 모두 Native Code로 바꿈
- 반복된 ByteCode는 Native Code로 바뀌어 있기 때문에 Interpreter가 바로 사용할 수 있게 됨
- 실행 시점에 Interpreter 방식으로 기계어 코드를 생성하면서 그것을 따로 캐싱을 하고 나중에 동일한 부분이 호출되면 캐싱해둔 코드를 불러다가 사용하는 방식이기에 Interpreter방식보다 빠름

<br/>

### 3. Garbage Collector

- 런타임 데이터 영역의 힙 영역을 더 이상 참조되지 않는 객체를 정리
- 힙 메모리 영역에 생성된 객체들 중에서 참조되지 않은 객체들을 탐색 후 자동으로 제거하는 역할
- C언어 같은 경우 직접 개발자가 메모리를 해제해줘야 되지만 JAVA는 이 가비지 컬렉터를 이용해 자동으로 메모리를 실시간 최적화 시켜줌
- 개발자가 따로 메모리를 관리하지 않아도 되므로 더욱 손쉽게 프로그래밍을 할 수 있도록 해줌
- 일반적으로 자동으로 실행되지만 GC(가비지 컬렉터) 가 실행되는 시간은 정해져 있지 않음
- 특히 Full GC 가 발생하는 경우 GC 를 제외한 모든 스레드가 중지되기 때문에 장애가 발생할 수 있음