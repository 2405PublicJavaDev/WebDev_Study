# JAVA의 클래스 로드 매커니즘

- 컴파일 타입(완전히 정적인 언어)의 언어에서는 필요한 기능들(헤더 파일 등에 있는)이 컴파일이 진행되면서 실행파일에 포함되며, 애플리케이션 실행 시 메모리에 미리 로드된다.
- JAVA는 바이트코드 형태로 컴파일이 되지만 필요한 라이브러리는 실행 시점에 메모리 로드된다!
- JVM 내에 있는 `클래스 로더` 가 JAVA 바이트코드를 전달받아서 필요한 클래스를 동적으로 로드

# 클래스 로더의 동작 과정
#### JAVA의 클래스 로더는 크게 3단계의 동작으로 동작한다!
1. 로딩
	- 바이트코드(=클래스파일)을 메모리(메서드 영역)에 로드
		- 로드된 클래스를 비롯한 그의 부모 클래스 정보
		- 클래스 파일과 Class, Interface, Enum(상수의 집합)의 관련 여부
		- 변수나 메서드 등의 정보
2. 링크
	로드된 클래스에 대해 3단계의 세부 작업으로 수행됨
	1. 검증(verify) : 클래스가 자바 언어 & JVM 명세에 명시된 대로 구성되어있는지 검사
				- 파일 형식 확인 : 형식이 잘못되어있는지, 손상된 파일인지
				- 바이트코드 검증 : JVM명세 체크(스택 오버/언더플로우, 데이터타입 일치)
				- 정적 구조 검증 : 상속 계층 구조가 올바른지, 클래스간의 참조가 유효한지
	2. 준비(prepare) : 클래스를 위한 메모리를 할당, 클래스에 정의된 필드, 메서드, 인터페이스 
				   등을 나타내는 데이터 구조 준비
				- 정적 변수가 생성되지만 기본값으로 초기화됨
	3. 분석(resolve) : 심볼릭 메모리 레퍼런스를 메서드 영역의 실제 레퍼런스로 교체
				- 심볼릭 참조 : 클래스, 메서드, 필드 등을 이름이나 경로와 같은 문자열
				  형태로 간접 참조하는 방식. 컴파일 시점, 클래스 로딩 시점에 사용하다 런타임 시점에 실제 참조로 해석됨
3. 초기화
	- 클래스 변수(Static)을 코드에서 명시한 값으로 초기화 해준다.
	- 상위 클래스가 먼저 초기화된 후 하위 클래스가 초기화됨